<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Time Tracking | Lucid</title>

  <meta name="description" content="Rastreamento de Tempo - Lucid - Registre e gerencie tempo trabalhado em projetos.">
  
  <!-- Preconnect para performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome para √≠cones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- CSS -->
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/theme.css">
  <link rel="stylesheet" href="styles/crm.css">
  <link rel="stylesheet" href="styles/time-tracking.css">
</head>

<body class="time-tracking-page">
  
  <!-- Header -->
  <header class="crm-header">
    <div class="crm-header-content">
      <div class="crm-logo">
        <a href="portal.html">
          <h1>LUCID</h1>
        </a>
        <span class="crm-badge">Time Tracking</span>
      </div>
      
      <nav class="crm-nav">
        <!-- Notifica√ß√µes -->
        <div class="notification-wrapper">
          <button id="notificationButton" class="btn-notification" title="Notifica√ß√µes">
            <i class="fas fa-bell"></i>
            <span id="notificationBadge" class="notification-badge" style="display: none;">
              <span id="notificationCount">0</span>
            </span>
          </button>
          <div id="notificationDropdown" class="notification-dropdown"></div>
        </div>
        
        <button id="themeToggle" class="btn-theme-toggle" title="Alternar tema">
          <span class="theme-icon" id="themeIcon">üåô</span>
        </button>
        <a href="portal.html" class="nav-link-portal">
          <i class="fas fa-home"></i>
          <span>Portal</span>
        </a>
        <span class="user-info" id="userInfo"></span>
        <button id="logoutBtn" class="btn-logout">Sair</button>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="crm-main">
    <div class="crm-container">
      
      <!-- Header Actions -->
      <div class="time-tracking-header">
        <div>
          <h2 class="section-title">Rastreamento de Tempo</h2>
          <p class="section-subtitle">Registre e gerencie o tempo trabalhado em projetos e tarefas</p>
        </div>
        <div class="time-tracking-actions">
          <button class="btn btn-secondary" id="btnRelatorios">
            <i class="fas fa-chart-bar"></i>
            Relat√≥rios
          </button>
        </div>
      </div>

      <!-- Timer Section -->
      <div class="timer-section">
        <div class="timer-card">
          <div class="timer-header">
            <h3>Timer</h3>
            <div class="timer-status" id="timerStatus">
              <span class="status-indicator"></span>
              Parado
            </div>
          </div>
          
          <div class="timer-display" id="timerDisplay">
            <span class="timer-time">00:00:00</span>
          </div>
          
          <div class="timer-controls">
            <select id="timerProjeto" class="timer-select" required>
              <option value="">Selecione um projeto</option>
            </select>
            
            <select id="timerTarefa" class="timer-select">
              <option value="">Nenhuma tarefa (opcional)</option>
            </select>
            
            <textarea id="timerDescricao" class="timer-textarea" placeholder="Descri√ß√£o do trabalho (opcional)"></textarea>
            
            <div class="timer-buttons">
              <button class="btn btn-success btn-timer" id="btnStartTimer">
                <i class="fas fa-play"></i>
                Iniciar
              </button>
              <button class="btn btn-warning btn-timer" id="btnPauseTimer" style="display: none;">
                <i class="fas fa-pause"></i>
                Pausar
              </button>
              <button class="btn btn-danger btn-timer" id="btnStopTimer" style="display: none;">
                <i class="fas fa-stop"></i>
                Parar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Filtros e Estat√≠sticas -->
      <div class="time-tracking-stats">
        <div class="stat-card-time">
          <div class="stat-icon-time">‚è±Ô∏è</div>
          <div class="stat-content-time">
            <h3 id="statHoje">0h</h3>
            <p>Hoje</p>
          </div>
        </div>
        <div class="stat-card-time">
          <div class="stat-icon-time">üìÖ</div>
          <div class="stat-content-time">
            <h3 id="statSemana">0h</h3>
            <p>Esta Semana</p>
          </div>
        </div>
        <div class="stat-card-time">
          <div class="stat-icon-time">üìä</div>
          <div class="stat-content-time">
            <h3 id="statMes">0h</h3>
            <p>Este M√™s</p>
          </div>
        </div>
        <div class="stat-card-time">
          <div class="stat-icon-time">üí∞</div>
          <div class="stat-content-time">
            <h3 id="statFaturado">R$ 0,00</h3>
            <p>Faturado</p>
          </div>
        </div>
      </div>

      <!-- Filtros -->
      <div class="time-tracking-filters">
        <div class="filter-group">
          <label for="filterDataInicio">Data In√≠cio</label>
          <input type="date" id="filterDataInicio" class="filter-input">
        </div>
        <div class="filter-group">
          <label for="filterDataFim">Data Fim</label>
          <input type="date" id="filterDataFim" class="filter-input">
        </div>
        <div class="filter-group">
          <label for="filterProjeto">Projeto</label>
          <select id="filterProjeto" class="filter-select">
            <option value="">Todos os Projetos</option>
          </select>
        </div>
        <div class="filter-group">
          <button class="btn btn-primary" id="btnFiltrar">
            <i class="fas fa-filter"></i>
            Filtrar
          </button>
        </div>
      </div>

      <!-- Lista de Registros -->
      <div class="time-records-section">
        <div class="section-header-inline">
          <h3>Registros de Tempo</h3>
          <button class="btn btn-secondary btn-sm" id="btnExportar">
            <i class="fas fa-download"></i>
            Exportar
          </button>
        </div>
        
        <div id="timeRecordsList" class="time-records-list">
          <div class="empty-state">
            <p>Nenhum registro encontrado. Use o timer para come√ßar a registrar seu tempo.</p>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Modal Editar Registro -->
  <div id="editRecordModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Editar Registro de Tempo</h3>
        <button class="modal-close" id="editRecordModalClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <form id="editRecordForm" class="time-tracking-form">
        <input type="hidden" id="editRecordId">
        
        <div class="form-group">
          <label for="editProjeto">Projeto *</label>
          <select id="editProjeto" class="form-input" required>
            <option value="">Selecione um projeto</option>
          </select>
        </div>

        <div class="form-group">
          <label for="editTarefa">Tarefa (opcional)</label>
          <select id="editTarefa" class="form-input">
            <option value="">Nenhuma tarefa</option>
          </select>
        </div>

        <div class="form-group">
          <label for="editDescricao">Descri√ß√£o</label>
          <textarea id="editDescricao" class="form-input" rows="3"></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="editData">Data *</label>
            <input type="date" id="editData" class="form-input" required>
          </div>

          <div class="form-group">
            <label for="editHoras">Horas *</label>
            <input type="number" id="editHoras" step="0.01" min="0" class="form-input" placeholder="0.00" required>
          </div>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="editFaturado">
            <span>Marcar como faturado</span>
          </label>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="btnCancelEdit">Cancelar</button>
          <button type="submit" class="btn btn-primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Relat√≥rios -->
  <div id="reportsModal" class="modal modal-large">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Relat√≥rios de Tempo</h3>
        <button class="modal-close" id="reportsModalClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="reports-content">
        <div class="reports-tabs">
          <button class="report-tab active" data-tab="projeto">Por Projeto</button>
          <button class="report-tab" data-tab="membro">Por Membro</button>
          <button class="report-tab" data-tab="periodo">Por Per√≠odo</button>
        </div>

        <div class="reports-body">
          <div id="reportProjeto" class="report-panel active">
            <h4>Horas por Projeto</h4>
            <div id="reportProjetoContent" class="report-content">
              <!-- Conte√∫do ser√° preenchido dinamicamente -->
            </div>
          </div>

          <div id="reportMembro" class="report-panel">
            <h4>Horas por Membro</h4>
            <div id="reportMembroContent" class="report-content">
              <!-- Conte√∫do ser√° preenchido dinamicamente -->
            </div>
          </div>

          <div id="reportPeriodo" class="report-panel">
            <h4>Horas por Per√≠odo</h4>
            <div id="reportPeriodoContent" class="report-content">
              <!-- Conte√∫do ser√° preenchido dinamicamente -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="scripts/supabase-config.js"></script>
  <script src="scripts/auth.js"></script>
  <script src="scripts/theme.js"></script>
  <script src="scripts/notificacoes.js"></script>
  <script src="scripts/time-tracking.js"></script>

</body>
</html>

